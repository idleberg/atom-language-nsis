"use strict";var e=require("path"),n=require("fs"),t=require("os"),r=require("child_process"),o=require("atom");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=i(e),a=i(n),c=i(t),u=i(r),l=function(){return(l=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};function d(e,n,t,r){return new(t||(t=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,a)}c((r=r.apply(e,n||[])).next())}))}function f(e,n){var t,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};const h=a.default,m=s.default,g=c.default;function v(e){console.log(`[dotenv][DEBUG] ${e}`)}const y=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,b=/\\n/g,w=/\r\n|\n|\r/;var k=function(e){let n=m.resolve(process.cwd(),".env"),t="utf8",r=!1;var o;e&&(null!=e.path&&(n="~"===(o=e.path)[0]?m.join(g.homedir(),o.slice(1)):o),null!=e.encoding&&(t=e.encoding),null!=e.debug&&(r=!0));try{const e=function(e,n){const t=Boolean(n&&n.debug),r={};return e.toString().split(w).forEach((function(e,n){const o=e.match(y);if(null!=o){const e=o[1];let n=o[2]||"";const t=n.length-1,i='"'===n[0]&&'"'===n[t];"'"===n[0]&&"'"===n[t]||i?(n=n.substring(1,t),i&&(n=n.replace(b,"\n"))):n=n.trim(),r[e]=n}else t&&v(`did not match key and value when parsing line ${n+1}: ${e}`)})),r}(h.readFileSync(n,{encoding:t}),{debug:r});return Object.keys(e).forEach((function(n){Object.prototype.hasOwnProperty.call(process.env,n)?r&&v(`"${n}" is already defined in \`process.env\` and will not be overwritten`):process.env[n]=e[n]})),{parsed:e}}catch(e){return{error:e}}},P="language-nsis",S={},E={};Object.defineProperty(E,"__esModule",{value:!0});var x=c.default,j=u.default,_=a.default,N=s.default;function A(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var C=A(x),D=A(_),O=A(N);const T=/\s+at.*(?:\(|\s)(.*)\)?/,M=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,I=void 0===C.default.homedir?"":C.default.homedir();class F extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let n=(e=[...e].map((e=>e instanceof Error?e:null!==e&&"object"==typeof e?Object.assign(new Error(e.message),e):new Error(e)))).map((e=>{return"string"==typeof e.stack?(e=>e.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""))((n=e.stack,t=Object.assign({pretty:!1},t),n.replace(/\\/g,"/").split("\n").filter((e=>{const n=e.match(T);if(null===n||!n[1])return!0;const t=n[1];return!t.includes(".app/Contents/Resources/electron.asar")&&!t.includes(".app/Contents/Resources/default_app.asar")&&!M.test(t)})).filter((e=>""!==e.trim())).map((e=>t.pretty?e.replace(T,((e,n)=>e.replace(n,n.replace(I,"~")))):e)).join("\n"))):String(e);var n,t})).join("\n");n="\n"+((e,n=1,t)=>{if(t={indent:" ",includeEmptyLines:!1,...t},"string"!=typeof e)throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof e}\``);if("number"!=typeof n)throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof n}\``);if("string"!=typeof t.indent)throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof t.indent}\``);if(0===n)return e;const r=t.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return e.replace(r,t.indent.repeat(n))})(n,4),super(n),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:e})}*[Symbol.iterator](){for(const e of this._errors)yield e}}var L=F;const $=(e,n,t)=>new Promise(((r,o)=>{if(t=Object.assign({concurrency:1/0},t),"function"!=typeof n)throw new TypeError("Mapper function is required");const{concurrency:i}=t;if(!("number"==typeof i&&i>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${i}\` (${typeof i})`);const s=[],a=e[Symbol.iterator]();let c=!1,u=!1,l=0,d=0;const f=()=>{if(c)return;const e=a.next(),t=d;if(d++,e.done)return u=!0,void(0===l&&r(s));l++,Promise.resolve(e.value).then((e=>n(e,t))).then((e=>{s[t]=e,l--,f()}),(e=>{c=!0,o(e)}))};for(let e=0;e<i&&(f(),!u);e++);}));var W=$,q=$;W.default=q;const V=async(e,n,t)=>(await W(e,((e,t)=>Promise.all([n(e,t),e])),t)).filter((e=>Boolean(e[0]))).map((e=>e[1]));var H=V,R=V;H.default=R;const B="undefined"!=typeof atom,U="undefined"!=typeof atom&&(atom.inDevMode()||atom.inSpecMode());
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */
var G=/["'&<>]/,J=function(e){var n,t=""+e,r=G.exec(t);if(!r)return t;var o="",i=0,s=0;for(i=r.index;i<t.length;i++){switch(t.charCodeAt(i)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}s!==i&&(o+=t.substring(s,i)),s=i+1,o+=n}return s!==i?o+t.substring(s,i):o};function Y(e,n,t){let r;const o=async function(e,n,t){const r=j.spawn(e,n,t),o=new Promise(((e,n)=>{const o={stdout:r.stdout?[]:null,stderr:r.stderr?[]:null};r.on("error",n),r.stdout&&r.stdout.on("data",(function(e){o.stdout.push(e),t.handleStdout&&t.handleStdout(e)})),r.stderr&&r.stderr.on("data",(function(e){o.stderr.push(e),t.handleStderr&&t.handleStderr(e)})),r.on("close",(n=>{let r=null;null!=o.stdout&&(r=null===t.encoding||"buffer"===t.encoding?Buffer.concat(o.stdout):o.stdout.join(""));let i=null;null!=o.stderr&&(i=null===t.encoding||"buffer"===t.encoding?Buffer.concat(o.stderr):o.stderr.join("")),e({exitCode:n,stdout:r,stderr:i})}))}));return t.handleChildProcess(r),o}(e,n,{...t,handleChildProcess(e){r=e}});return o.kill=function(e){return r.kill(e)},o}async function K(e){if(B){const n=await async function(e){var n;const t=atom.packages.getLoadedPackage(e.name);return null==t?null:null!==(n=t.metadata.version)&&void 0!==n?n:null}(e);if(n)return n}return async function(e){var n,t;const{directory:r}=e;if(null==r)return null;let o=null;try{o=JSON.parse(await D.default.promises.readFile(O.default.join(r,"package.json"),"utf8"))}catch(e){return null}return null!==(n=null===(t=o)||void 0===t?void 0:t.version)&&void 0!==n?n:null}(e)}const z=B?async function(e){return atom.packages.resolvePackagePath(e)}:async function(e){var n;const t=O.default.join(null!==(n=process.env.ATOM_HOME)&&void 0!==n?n:O.default.join(C.default.homedir(),".atom"),"packages",e);try{return await D.default.promises.access(t,D.default.constants.R_OK),t}catch(e){return null}};function Q(e,n){if(!e)throw new Error(null!=n?n:"Invariant violation")}async function X(e){const n=await(B?async function(e){const n=atom.packages.getLoadedPackage(e),t=n&&n.metadata["package-deps"];return Array.isArray(t)?t:[]}(e):async function(e){let n=null;try{n=await D.default.promises.stat(e)}catch(e){}if(null==n||!n.isDirectory())throw new Error("[Package-Deps] Expected packageName to be a readable directory in Node.js invocation");let t=null;try{const n=await D.default.promises.readFile(O.default.join(e,"package.json"),"utf8");t=JSON.parse(n)}catch(e){}const r=null==t||"object"!=typeof t?[]:t["package-deps"];return Array.isArray(r)?r:[]}(e));return U&&(Q(Array.isArray(n),`Dependencies for ${e} are not a valid array`),n.forEach(((n,t)=>{if(Array.isArray(n))n.forEach(((n,r)=>{const o=`Dependency#${t}#${r} for ${e} is invalid`;Q("string"==typeof n.name&&n.name.length>0,o),Q(null==n.minimumVersion||"string"==typeof n.minimumVersion&&n.minimumVersion.length>0,o)})),Q(n.length>0,`Dependency#${t} for ${e} has no group items`);else{const r=`Dependency#${t} for ${e} is invalid`;Q("string"==typeof n.name&&n.name.length>0,r),Q(null==n.minimumVersion||"string"==typeof n.minimumVersion&&n.minimumVersion.length>0,r)}}))),n}async function Z(e){if(null==e.directory)return!0;if(null==e.minimumVersion)return!1;const n=await K(e);return null==n||1===function(e,n){for(var t=e.split("."),r=n.split("."),o=0;o<3;o++){var i=Number(t[o]),s=Number(r[o]);if(i>s)return 1;if(s>i)return-1;if(!isNaN(i)&&isNaN(s))return 1;if(isNaN(i)&&!isNaN(s))return-1}return 0}(e.minimumVersion,n)}const ee=new Set(["✓","done"]),ne=/(?:Installing|Moving) (.*?) to .* (.*)/;async function te(e){if("string"==typeof e)return{name:e,directory:await z(e)};if("name"in e)return{...e,directory:await z(e.name)};throw console.error("This package-deps entry is not valid. Please see https://github.com/steelbrain/package-deps#how-it-works",{entry:e}),Error("The package-deps entry is not valid. Please see https://github.com/steelbrain/package-deps#how-it-works")}let re=!0;const oe=B?function({packageName:e,dependencies:n}){const t=[],r=atom.notifications.addInfo(`Installing ${e} dependencies`,{detail:`Installing ${n.map((e=>e.name)).join(", ")}`,dismissable:!0}),o=document.createElement("progress");o.max=n.length,o.style.width="100%";try{var i;const e=atom.views.getView(r),n=null!==(i=null==e?void 0:e.element)&&void 0!==i?i:null;if(null==n)throw new Error("Unable to get notification element from view");const t=n.querySelector(".detail-content");if(null==t)throw new Error("Content detail container not found inside the notification");t.appendChild(o)}catch(e){console.error("[Package-Deps] Error during showing installation progress to user",e)}return{handleFailure({dependency:e,error:n}){var r;t.push(e.name),o.value+=1,console.error(`[Package-Deps] Unable to install ${e.name}, Error:`,null!==(r=null==n?void 0:n.stack)&&void 0!==r?r:n)},handleDependencyInstalled(e){o.value+=1},handleComplete(){r.dismiss(),t.length>0?atom.notifications.addWarning(`Failed to install ${e} dependencies`,{detail:`These packages were not installed, check your console\nfor more info.\n${t.join("\n")}`,dismissable:!0}):atom.notifications.addSuccess(`Installed ${e} dependencies`,{detail:`Installed ${n.map((e=>e.name)).join(", ")}`}),Promise.all(n.map((e=>t.includes(e.name)?null:atom.packages.activatePackage(e.name)))).catch((n=>{console.error(`[Package-Deps] Error activating installed packages for ${e}`,n)}))}}}:function({dependencies:e}){let n=!1;return console.log(`Installing dependencies:\n${e.map((e=>`  - ${e.name}`)).join("\n")}`),{handleFailure({dependency:e,error:t}){var r;n=!0,console.error(`Unable to install ${e.name}, Error:`,null!==(r=null==t?void 0:t.stack)&&void 0!==r?r:t)},handleDependencyInstalled(e){console.log("Successfully installed",e.name)},handleComplete(){console.log("Installation complete"),n&&(process.exitCode=1)}}},ie=B?function({packageName:e,dependencies:n}){return new Promise((t=>{const r=n.filter((e=>!Array.isArray(e))),o=n.filter((e=>Array.isArray(e))),i=0===o.length,s=i?r.map((e=>e.name)).join(", "):"Something went wrong. Check your developer console",a=o.map((e=>e[0]));atom.packages.isPackageDisabled("notifications")&&console.warn(`Enable notifications to install dependencies for ${e}`);const c=atom.notifications.addInfo(`${e} needs to install dependencies`,{dismissable:!0,icon:"cloud-download",detail:s,description:`Install dependenc${1===n.length?"y":"ies"}?`,buttons:[{text:"Yes",onDidClick:()=>{t(i?r:r.concat(a)),c.dismiss()}},{text:"No Thanks",onDidClick:()=>{c.dismiss()}},{text:"Never",onDidClick:()=>{!function(e){var n;if(!B)return;const t=new Set(null!==(n=atom.config.get("atom-package-deps.ignored"))&&void 0!==n?n:[]);t.add(e),atom.config.set("atom-package-deps.ignored",Array.from(t))}(e),re&&(re=!1,atom.notifications.addInfo("How to reset package-deps memory",{dismissable:!0,description:"To modify the list of ignored files invoke 'Application: Open Your Config' and change the 'atom-package-deps' section"})),c.dismiss()}}]});if(c.onDidDismiss((()=>t([]))),!i)try{var u;const e=atom.views.getView(c),n=null!==(u=null==e?void 0:e.element)&&void 0!==u?u:null;if(null==n)throw new Error("Unable to get notification element from view");const t=n.querySelector(".detail-content");if(null==t)throw new Error("Content detail container not found inside the notification");if(t.innerHTML="",r.length>0){const e=document.createElement("div");e.innerHTML=`Packages without choices: <br /><ul><li>${r.map((e=>J(e.name))).join("</li><li>")}</li></ul>`,t.appendChild(e)}const i=document.createElement("div");i.innerHTML="Packages with choices:",t.appendChild(i);const s=document.createElement("ul");o.forEach(((e,n)=>{const t=document.createElement("li"),r=document.createElement("select");r.innerHTML=e.map((e=>`<option>${J(e.name)}</option>`)).join("\n"),r.addEventListener("change",(()=>{const t=e.find((e=>e.name===r.value));null!=t&&(a[n]=t)})),t.style.marginTop="5px",t.appendChild(r),s.appendChild(t)})),t.appendChild(s)}catch(e){console.error("[Package-Deps] Error during showing package choices to user",e)}}))}:async function({dependencies:e}){return e.map((e=>Array.isArray(e)?e[0]:e))};E.install=async function(e,n=!1){if(Q("string"==typeof e&&e.length>0,"[Package-Deps] Package name is required"),function(e){var n;return!!B&&!!(null!==(n=atom.config.get("atom-package-deps.ignored"))&&void 0!==n?n:[]).includes(e)}(e))return;const t=await X(e);if(0===t.length)return;const r=await Promise.all(t.map((async e=>Array.isArray(e)?Promise.all(e.map(te)):te(e)))),o=await H(r,(async function(e){return Array.isArray(e)?(await Promise.all(e.map((e=>Z(e))))).every(Boolean):Z(e)}));if(0===o.length)return;let i;if(i=n?o.map((e=>Array.isArray(e)?e[0]:e)):await ie({packageName:e,dependencies:o}),0===i.length)return;const s=oe({packageName:e,dependencies:i});await(async(e,n,{concurrency:t=1/0,stopOnError:r=!0}={})=>new Promise(((o,i)=>{if("function"!=typeof n)throw new TypeError("Mapper function is required");if(!Number.isSafeInteger(t)&&t!==1/0||!(t>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${t}\` (${typeof t})`);const s=[],a=[],c=e[Symbol.iterator]();let u=!1,l=!1,d=0,f=0;const p=()=>{if(u)return;const e=c.next(),t=f;if(f++,e.done)return l=!0,void(0===d&&(r||0===a.length?o(s):i(new L(a))));d++,(async()=>{try{const r=await e.value;s[t]=await n(r,t),d--,p()}catch(e){r?(u=!0,i(e)):(a.push(e),d--,p())}})()};for(let e=0;e<t&&(p(),!l);e++);})))(i,(async function(e){try{await async function(e){const n=B?`"${atom.packages.getApmPath()}"`:"apm",{stdout:t,stderr:r}=await Y(n,["install",e.name,"--production","--color","false"],{shell:!0}),o=ne.exec(t.trim());if(null!=o&&ee.has(o[2]))return;const i=new Error(`Error installing dependency: ${e.name}`);throw i.stack=r.trim(),i}(e),s.handleDependencyInstalled(e)}catch(n){s.handleFailure({dependency:e,error:n})}}),{concurrency:2}),s.handleComplete()};var se={},ae={exports:{}};const ce=()=>{const e=Error.prepareStackTrace;Error.prepareStackTrace=(e,n)=>n;const n=(new Error).stack.slice(1);return Error.prepareStackTrace=e,n};ae.exports=ce,ae.exports.default=ce;const ue=ae.exports;var le=p&&p.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,a)}c((r=r.apply(e,n||[])).next())}))},de=p&&p.__generator||function(e,n){var t,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(se,"__esModule",{value:!0}),se.readManifestSync=se.readManifest=void 0;var fe=s.default,pe=fe.resolve,he=fe.sep,me=a.default,ge=me.promises,ve=me.readFileSync,ye=({depth:e=0}={})=>{const n=[],t=new Set;for(const r of ue()){const o=r.getFileName(),i=null!==r.getTypeName()&&null!==o;if(t.has(o)||(t.add(o),n.unshift(r)),i)return n[e]}};function be(e){e=(null==e?void 0:e.length)?e:function(){var e=ye().getFileName(),n=atom.packages.getPackageDirPaths().filter((function(n){return e.startsWith(n)}));if(null==n?void 0:n.length)return e.replace(n[0],"").split(he).filter((function(e){return e}))[0]||"";return""}();var n=atom.packages.resolvePackagePath(e);return pe(n,"package.json")}se.readManifest=function(e){return void 0===e&&(e=""),le(this,void 0,void 0,(function(){var n,t;return de(this,(function(r){switch(r.label){case 0:n=be(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,ge.readFile(n,"utf8")];case 2:return t=r.sent(),[2,JSON.parse(t)];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},se.readManifestSync=function(e){void 0===e&&(e="");var n=be(e);try{var t=ve(n,"utf8");return JSON.parse(t)}catch(e){return null}};var we=p&&p.__assign||function(){return(we=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},ke=p&&p.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,a)}c((r=r.apply(e,n||[])).next())}))},Pe=p&&p.__generator||function(e,n){var t,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(S,"__esModule",{value:!0});var Se=S.satisfyDependencies=void 0,Ee=E,xe=se,je={logger:console.log};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function _e(e,n){for(var t=0,r=n.length,o=e.length;t<r;t++,o++)e[o]=n[t];return e}Se=S.satisfyDependencies=function(e,n){return void 0===n&&(n={}),ke(this,void 0,void 0,(function(){var t,r;return Pe(this,(function(o){switch(o.label){case 0:return t=we(we({},je),n),[4,xe.readManifest(e)];case 1:return r=o.sent(),[4,Ee.install(r.name)];case 2:return o.sent(),function(e,n){n.enableDependencies&&e["package-deps"].map((function(t){atom.packages.isPackageDisabled(t)&&(atom.inDevMode()&&n.logger("["+e.name+"] Enabling package dependency '"+t+"'"),atom.packages.enablePackage(t))}))}(r["package-deps"],t),[2]}}))}))};var Ne=new(function(){function e(e){void 0===e&&(e={}),this.name=e.name,this.styleSheet="\n      background-color: "+(e.backgroundColor||"darkgrey")+";\n      border-radius: 2px;\n      color: "+(e.color||"white")+";\n      line-height: 1.5;\n      padding: 1px 4px;\n      text-shadow: 0 1px 0px rgba(0, 0, 0, 0.2);\n    "}return e.prototype.__console__=function(e){for(var n,t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];(null===atom||void 0===atom?void 0:atom.inDevMode())&&(t.unshift("%c"+this.name+"%c",this.styleSheet,""),(n=window.console)[e].apply(n,t))},e.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.__console__.apply(this,_e(["debug"],e))},e.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.__console__.apply(this,_e(["error"],e))},e.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.__console__.apply(this,_e(["info"],e))},e.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.__console__.apply(this,_e(["log"],e))},e.prototype.trace=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.__console__.apply(this,_e(["trace"],e))},e.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.__console__.apply(this,_e(["warn"],e))},e}())({name:P,backgroundColor:"coral"}),Ae={browse:null,consumer:function(e){var n=this;return this.browse=e,new o.Disposable((function(){n.browse=null}))},reveal:function(e){return d(this,void 0,void 0,(function(){var n;return f(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,this.browse({action:"reveal",target:e})];case 1:return t.sent(),[3,4];case 2:return n=t.sent(),Ne.debug(n),[4,Promise.resolve().then((function(){return Le}))];case 3:return(0,t.sent().missingPackageWarning)("browse"),[3,4];case 4:return[2]}}))}))}},Ce={consolePanel:null,consumer:function(e){var n=this;return this.consolePanel=e,new o.Disposable((function(){n.consolePanel=null}))},show:function(){this.consolePanel.show()},hide:function(){this.consolePanel.hide()},toggle:function(){this.consolePanel.toggle()},clear:function(){this.consolePanel.clear()},log:function(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];(e=this.consolePanel).log.apply(e,n)},error:function(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];(e=this.consolePanel).error.apply(e,n)},warn:function(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];(e=this.consolePanel).warn.apply(e,n)}};function De(e){return d(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,n.promises.access(e,n.constants.F_OK)];case 1:return t.sent(),[3,3];case 2:return t.sent(),[2,!1];case 3:return[2,!0]}}))}))}function Oe(){return d(this,void 0,void 0,(function(){var n,t,r,o;return f(this,(function(i){switch(i.label){case 0:return n=void 0,(t=atom.project.getPaths()[0])?(r=!0,[4,De(e.resolve(t,".env.local"))]):[3,10];case 1:switch(r){case i.sent():return[3,5]}return(o=process.env.NODE_ENV)?[4,De(e.resolve(t,".env.["+process.env.NODE_ENV+"]"))]:[3,3];case 2:o=i.sent(),i.label=3;case 3:switch(r){case o:return[3,6]}return[4,De(e.resolve(t,".env"))];case 4:switch(r){case i.sent():return[3,7]}return[3,8];case 5:return n=e.resolve(t,".env.local"),[3,9];case 6:return n=e.resolve(t,".env.["+process.env.NODE_ENV+"]"),[3,9];case 7:return n=e.resolve(t,".env"),[3,9];case 8:return[3,9];case 9:n&&Ne.log("Found DotEnv file "+n),i.label=10;case 10:return[2,n]}}))}))}function Te(e){return atom.packages.isPackageLoaded(e)&&atom.packages.isPackageActive(e)}function Me(){return"win32"===t.platform()}function Ie(){return!(!Me()&&!$e.get("useWineToRun"))}function Fe(e){return d(this,void 0,void 0,(function(){var n,t;return f(this,(function(o){switch(o.label){case 0:if(!Me())return[3,1];try{r.exec('cmd /c "'+e+'"')}catch(e){console.error(e),atom.notifications.addWarning("Failed to run installer, see console for details",{dismissable:!0})}return[2];case 1:return $e.get("useWineToRun")?[4,Promise.resolve().then((function(){return require("./index-3af56b78.js")})).then((function(e){return e.index}))]:[3,6];case 2:n=o.sent().default,o.label=3;case 3:return o.trys.push([3,5,,6]),[4,n("wine",[e])];case 4:return o.sent(),[3,6];case 5:return t=o.sent(),atom.notifications.addWarning("Failed to run installer, see console for details",{dismissable:!0}),console.error(t),[3,6];case 6:return[2]}}))}))}var Le=Object.freeze({__proto__:null,clearConsole:function(){try{Ce.clear()}catch(e){$e.get("clearConsole")&&console.clear()}},fileExists:De,findPackagePath:function(n){return d(this,void 0,void 0,(function(){var t,r=this;return f(this,(function(o){switch(o.label){case 0:return t=atom.packages.getPackageDirPaths(),[4,Promise.all(t.map((function(t){return d(r,void 0,void 0,(function(){var r;return f(this,(function(o){switch(o.label){case 0:return r=e.resolve(t,n),[4,De(e.resolve(r,"package.json"))];case 1:return o.sent()?[2,r]:[2,void 0]}}))}))})))];case 1:return[2,o.sent().filter((function(e){return e}))]}}))}))},getMakensisPath:function(){return d(this,void 0,void 0,(function(){var e,n,t;return f(this,(function(r){switch(r.label){case 0:return(null==(e=String($e.get("compilerOptions.pathToMakensis")))?void 0:e.length)&&"makensis"!==e?[2,e]:[4,Promise.resolve().then((function(){return require("./which-e9ae9919.js")})).then((function(e){return e.which}))];case 1:return n=r.sent().default,t=String,[4,n("makensis")];case 2:return[2,t.apply(void 0,[r.sent()])||"makensis"]}}))}))},getSpawnEnv:function(){return d(this,void 0,void 0,(function(){return f(this,(function(e){return[2,{env:{NSISDIR:process.env.NSISDIR||void 0,NSISCONFDIR:process.env.NSISCONFDIR||void 0,LANGUAGE:Me()||process.env.LANGUAGE?void 0:"en_US.UTF-8",LC_ALL:Me()||process.env.LC_ALL?void 0:"en_US.UTF-8"}}]}))}))},initDotEnv:function(){return d(this,void 0,void 0,(function(){var e,n;return f(this,(function(t){switch(t.label){case 0:return[4,Promise.resolve().then((function(){return require("./main-297ff40a.js")})).then((function(e){return e.main}))];case 1:return e=t.sent().default,[4,Oe()];case 2:return n=t.sent(),e(k({path:n})),n&&Ne.log("Loading environment variables",Object.entries(process.env).filter((function(e){return e[0].startsWith("NSIS_APP_")}))),[2]}}))}))},isHeaderFile:function(e){return Boolean([".bnsh",".nsh"].filter((function(n){return null==e?void 0:e.endsWith(n)})).length)},isLoadedAndActive:Te,isWindows:Me,isWindowsCompatible:Ie,manageDependencies:function(){return d(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,Se(P)];case 1:return e.sent(),[2]}}))}))},mapDefinitions:function(){var e={};return Object.keys(process.env).map((function(n){n.length&&new RegExp("NSIS_APP_[a-z0-9]+","gi").test(n)&&(e[n]=process.env[n])})),Object.keys(e).length?e:void 0},migrateConfig:function(e,n){if(atom.config.get(P+"."+e)&&!atom.config.get(P+"."+n)){try{atom.config.set(P+"."+n,atom.config.get(P+"."+e))}catch(e){return console.log(e),void atom.notifications.addWarning("Failed to migrate configuration, see console for details")}Ne.warn("The setting '"+e+"' was migrated successfully to '"+n+"'"),atom.config.unset(P+"."+e)}else Ne.warn("The setting '"+n+"' already exists, skipping migration")},missingPackageWarning:function(e){var n=atom.notifications.addWarning("This command requires the `"+e+"` package to be installed and enabled",{dismissable:!0,buttons:[{text:"Show Package",onDidClick:function(){return d(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return n.dismiss(),[4,atom.workspace.open("atom://config/packages/"+e,{pending:!0,searchAllPanes:!0})];case 1:return t.sent(),[2]}}))}))}},{text:"Cancel",onDidClick:function(){n.dismiss()}}]})},notifyOnCompletion:function(e,n,t){var r=atom.notifications[e](n,{dismissable:!0,buttons:t?[Ie()?{text:"Run",className:"icon icon-playback-play",onDidClick:function(){return d(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return r.dismiss(),[4,Fe(t)];case 1:return e.sent(),[2]}}))}))}}:void 0,Te("browse")?{text:"Reveal",className:"icon icon-location",onDidClick:function(){r.dismiss(),Ae.reveal(t)}}:void 0,{text:"Cancel",onDidClick:function(){r.dismiss()}}].filter((function(e){return e})):[]})},openURL:function(e){return d(this,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return[4,Promise.resolve().then((function(){return require("./index-5618820d.js")})).then((function(e){return e.index}))];case 1:return(0,n.sent().default)("https://idleberg.github.io/NSIS.docset/Contents/Resources/Documents/html/Reference/"+e+".html?utm_source=atom&utm_content=reference"),[2]}}))}))}}),$e={schema:{compilerOptions:{title:"Compiler Options",type:"object",order:1,properties:{pathToMakensis:{title:"Path To MakeNSIS",description:"Specify the full path to `makensis`",type:"string",default:"makensis",order:1},verbosity:{title:"Verbosity",description:"Specify the default verbosity for `makensis`",type:"number",default:3,enum:[{value:0,description:"0 - none"},{value:1,description:"1 - no warnings"},{value:2,description:"2 - no info"},{value:3,description:"3 - no script"},{value:4,description:"4 - all"}],order:2},strictMode:{title:"Strict Mode",description:"Enabling strict mode will treat warnings as errors. Note that when disabled, running *NSIS: Compile Strict* will override the setting",type:"boolean",default:!1,order:3},customArguments:{title:"Custom Arguments",description:"Specify any of the default [compiler arguments](http://nsis.sourceforge.net/Docs/Chapter3.html#usage). Note that these will have precedence over the settings above",type:"string",default:"",order:4}}},processHeaders:{title:"Process Headers",description:"By default, you can only compile (and create build-files) for `.nsi` files. This setting enables support for `.nsh` files.",type:"boolean",default:!1,order:1},showBuildNotifications:{title:"Show Build Notifications",description:"Displays color-coded notifications that close automatically after 5 seconds",type:"boolean",default:!0,order:2},showFlagsAsObject:{title:"Show Flags as Object",description:"Displays compiler flags as JSON",type:"boolean",default:!0,order:3},alwaysShowOutput:{title:"Always Show Output",description:"Displays compiler output in console panel. When deactivated, it will only show on errors",type:"boolean",default:!0,order:4},clearConsole:{title:"Clear Console",description:"When `console-panel` isn't available, build logs will be printed using `console.log()`. This setting clears the console prior to building.",type:"boolean",default:!0,order:5},compilerOutput:{title:"Compiler Output",description:"Specify whether `makensis` outputs its version or compiler flags to notifications the console",type:"string",default:"console",enum:[{value:"notification",description:"Notification"},{value:"console",description:"Console"}],order:6},buildFileSyntax:{title:"Build File Syntax",description:"Specify the default syntax for your build file (requires [build](https://atom.io/packages/build))",type:"string",default:"json",enum:[{value:"json",description:"JSON"},{value:"yaml",description:"YAML"}],order:7},useWineToRun:Me()?{}:{title:"Use Wine to run",description:"When on a non-Windows platform, you can run compiled installers using [Wine](https://www.winehq.org/)",type:"boolean",default:!1,order:8},manageDependencies:{title:"Manage Dependencies",description:"When enabled, third-party dependencies will be installed automatically",type:"boolean",default:!0,order:9}},get:function(e){return void 0===e&&(e=""),(null==e?void 0:e.length)?atom.config.get(P+"."+e):atom.config.get(""+P)},migrate:function(e,n){if(atom.config.get(P+"."+e)&&!atom.config.get(P+"."+n)){try{atom.config.set(P+"."+n,atom.config.get(P+"."+e))}catch(e){return void atom.notifications.addWarning("Failed to migrate configuration, see console for details")}atom.config.unset(P+"."+e)}},unset:function(e){void 0===e&&(e="");var n=(null==e?void 0:e.length)?P+"."+e:P;atom.config.unset(n)},open:function(e){return void 0===e&&(e={}),d(this,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return e=l({pending:!0,searchAllPanes:!0},e),[4,atom.workspace.open("atom://config/packages/"+P,e)];case 1:return n.sent(),[2]}}))}))}},We={busySignal:null,serviceName:"busy-signal",consumer:function(e){var n=this;return this.busySignal=e.create(),new o.Disposable((function(){n.busySignal=null}))},add:function(e){return d(this,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return n.trys.push([0,1,,3]),this.busySignal.add(e),[3,3];case 1:return n.sent(),[4,Promise.resolve().then((function(){return Le}))];case 2:return(0,n.sent().missingPackageWarning)(this.serviceName),[3,3];case 3:return[2]}}))}))},remove:function(e){return void 0===e&&(e=""),d(this,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return n.trys.push([0,1,,3]),this.busySignal.remove(e),[3,3];case 1:return n.sent(),[4,Promise.resolve().then((function(){return Le}))];case 2:return(0,n.sent().missingPackageWarning)(this.serviceName),[3,3];case 3:return[2]}}))}))},clear:function(){return d(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return e.trys.push([0,1,,3]),this.busySignal.clear(),[3,3];case 1:return e.sent(),[4,Promise.resolve().then((function(){return Le}))];case 2:return(0,e.sent().missingPackageWarning)(this.serviceName),[3,3];case 3:return[2]}}))}))},dispose:function(){try{this.busySignal.dispose()}catch(e){console.error(e)}}};function qe(n){return d(this,void 0,void 0,(function(){var t,r,o,i,s,a,c,u,l,p,h,m,g,v,y,b,w,k,P,S,E,x=this;return f(this,(function(j){switch(j.label){case 0:return(t=atom.workspace.getActiveTextEditor())?(r=t.getPath(),o=t.getGrammar().scopeName,[4,Promise.resolve().then((function(){return Le}))]):(atom.notifications.addWarning("No active editor",{dismissable:!1}),[2]);case 1:if(i=j.sent().isHeaderFile,$e.get("processHeaders")&&i(r))return s=atom.notifications.addWarning("Compiling header files is blocked by default. You can allow this in the package settings.",{dismissable:!0,buttons:[{text:"Open Settings",className:"icon icon-gear",onDidClick:function(){return d(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,atom.workspace.open("atom://config/packages/language-nsis",{pending:!0,searchAllPanes:!0})];case 1:return e.sent(),s.dismiss(),[2]}}))}))}},{text:"Cancel",onDidClick:function(){s.dismiss()}}]}),atom.beep(),[2];if(!r||!o.startsWith("source.nsis"))return[3,15];j.label=2;case 2:return j.trys.push([2,4,,5]),[4,t.save()];case 3:return j.sent(),[3,5];case 4:return a=j.sent(),console.log(a),atom.beep(),[2];case 5:return[4,Promise.resolve().then((function(){return Le}))];case 6:return c=j.sent(),u=c.clearConsole,l=c.getMakensisPath,p=c.getSpawnEnv,h=c.isLoadedAndActive,m=c.mapDefinitions,u(),h("busy-signal")?[4,We.add("Compiling "+e.basename(r))]:[3,8];case 7:j.sent(),j.label=8;case 8:return[4,Promise.resolve().then((function(){return require("./makensis-5a51bc64.js")}))];case 9:return g=j.sent(),[4,Promise.resolve().then((function(){return require("./handlers-41209b19.js")}))];case 10:return v=j.sent(),y=v.compilerOutputHandler,b=v.compilerErrorHandler,w=v.compilerExitHandler,g.events.on("stdout",y),g.events.on("stderr",b),g.events.once("exit",(function(){return d(x,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,w];case 1:return[2,e.sent()]}}))}))})),P=(k=g).compile,S=[r],E={define:m(),json:$e.get("showFlagsAsObject")},[4,l()];case 11:return S=S.concat([(E.pathToMakensis=j.sent(),E.rawArguments=$e.get("compilerOptions.customArguments"),E.strict=n||$e.get("compilerOptions.strictMode"),E.verbose=parseInt(String($e.get("compilerOptions.verbosity"))),E)]),[4,p()];case 12:return[4,P.apply(k,S.concat([j.sent()]))];case 13:return j.sent(),g.events.removeAllListeners(),h("busy-signal")?[4,We.clear()]:[3,15];case 14:j.sent(),j.label=15;case 15:return[2]}}))}))}function Ve(){return d(this,void 0,void 0,(function(){var e,n,t,r,o,i,s,a,c,u,l;return f(this,(function(d){switch(d.label){case 0:return[4,Promise.resolve().then((function(){return Le}))];case 1:return e=d.sent(),n=e.clearConsole,t=e.getMakensisPath,r=e.getSpawnEnv,(o=e.isLoadedAndActive)("busy-signal")?[4,We.add("Showing version")]:[3,3];case 2:d.sent(),d.label=3;case 3:return n(),[4,t()];case 4:return i=d.sent(),[4,Promise.resolve().then((function(){return require("./makensis-5a51bc64.js")}))];case 5:return s=d.sent(),[4,Promise.resolve().then((function(){return require("./handlers-41209b19.js")}))];case 6:return a=d.sent().versionHandler,s.events.once("stdout",(function(e){return a(e,i)})),u=(c=s).version,l=[{pathToMakensis:i}],[4,r()];case 7:return[4,u.apply(c,l.concat([d.sent()]))];case 8:return d.sent(),o("busy-signal")?[4,We.clear()]:[3,10];case 9:d.sent(),d.label=10;case 10:return[2]}}))}))}function He(){return d(this,void 0,void 0,(function(){var e,n,t,r,o,i,s,a,c,u,l;return f(this,(function(d){switch(d.label){case 0:return[4,Promise.resolve().then((function(){return Le}))];case 1:return e=d.sent(),n=e.clearConsole,t=e.getMakensisPath,r=e.getSpawnEnv,(o=e.isLoadedAndActive)("busy-signal")?[4,We.add("Showing compiler flags")]:[3,3];case 2:d.sent(),d.label=3;case 3:return n(),[4,Promise.resolve().then((function(){return require("./makensis-5a51bc64.js")}))];case 4:return i=d.sent(),[4,Promise.resolve().then((function(){return require("./handlers-41209b19.js")}))];case 5:return s=d.sent().flagsHandler,i.events.once("exit",s),c=(a=i).headerInfo,l={json:$e.get("showFlagsAsObject")},[4,t()];case 6:return u=[(l.pathToMakensis=d.sent(),l)],[4,r()];case 7:return[4,c.apply(a,u.concat([d.sent()]))];case 8:return d.sent(),o("busy-signal")?[4,We.clear()]:[3,10];case 9:d.sent(),d.label=10;case 10:return[2]}}))}))}function Re(e){return d(this,void 0,void 0,(function(){var n,t,r,o,i,s,a,c,u;return f(this,(function(l){switch(l.label){case 0:return[4,Promise.resolve().then((function(){return require("./makensis-5a51bc64.js")}))];case 1:return n=l.sent(),[4,Promise.resolve().then((function(){return Le}))];case 2:return t=l.sent(),r=t.getMakensisPath,o=t.getSpawnEnv,a=(s=n).commandHelp,c=[""],u={json:!0},[4,r()];case 3:return c=c.concat([(u.pathToMakensis=l.sent(),u)]),[4,o()];case 4:return[4,a.apply(s,c.concat([l.sent()]))];case 5:return i=l.sent(),e.update({items:Object.keys(i.stdout)}),[2]}}))}))}function Be(){return d(this,void 0,void 0,(function(){var e;return f(this,(function(n){switch(n.label){case 0:if(!(e=atom.workspace.getActiveTextEditor()))return atom.beep(),[2];switch(e.getGrammar().scopeName){case"source.nlf":return[3,1];case"source.json":case"source.json5":return[3,3]}return[3,5];case 1:return[4,Ue(e)];case 2:return n.sent(),[3,6];case 3:return[4,Ge(e)];case 4:return n.sent(),[3,6];case 5:return atom.beep(),[3,6];case 6:return[2]}}))}))}function Ue(e){return d(this,void 0,void 0,(function(){var n,t,r;return f(this,(function(o){switch(o.label){case 0:return[4,Promise.resolve().then((function(){return require("./index-8f18bbaa.js")})).then((function(e){return e.index}))];case 1:n=o.sent();try{r=e.getText(),t=n.parse(r,{stringify:!0})}catch(e){return console.error(e),atom.notifications.addError("Conversion Failed",{detail:e,dismissable:!0}),[2]}return[4,Je(e,t,"json")];case 2:return o.sent(),[2]}}))}))}function Ge(e){return d(this,void 0,void 0,(function(){var n,t,r;return f(this,(function(o){switch(o.label){case 0:return[4,Promise.resolve().then((function(){return require("./index-8f18bbaa.js")})).then((function(e){return e.index}))];case 1:n=o.sent();try{r=e.getText(),t=n.stringify(r)}catch(e){return console.error(e),atom.notifications.addError("Conversion Failed",{detail:e,dismissable:!0}),[2]}return[4,Je(e,t,"nlf")];case 2:return o.sent(),[2]}}))}))}function Je(n,t,r){return d(this,void 0,void 0,(function(){var o,i,s,a;return f(this,(function(c){switch(c.label){case 0:i=n.getFileName().toString(),s=e.basename(i,e.extname(i)),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,atom.workspace.open(s+"."+r,{pending:!0})];case 2:return o=c.sent(),[3,4];case 3:return a=c.sent(),console.error(a),atom.notifications.addError(a,{dismissable:!0}),[2];case 4:return o.setText(t),[2]}}))}))}var Ye={init:function(){return d(this,void 0,void 0,(function(){var e,n=this;return f(this,(function(t){switch(t.label){case 0:return[4,Promise.resolve().then((function(){return require("./select-list-view-4931ea8e.js")})).then((function(e){return e.selectListView}))];case 1:return e=t.sent().default,this.selectListView=new e({emptyMessage:"No command matches your search.",items:[],filterKeyForItem:function(e){return e},elementForItem:function(e){var n=document.createElement("li"),t=e;return n.innerHTML=t,n},didConfirmSelection:function(e){return d(n,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return this.cancel(),[4,Promise.resolve().then((function(){return Le}))];case 1:return[4,(0,n.sent().openURL)(String(e))];case 2:return n.sent(),[2]}}))}))},didCancelSelection:function(){n.cancel()}}),this.selectListView.element.classList.add("nsis-command-list"),[2]}}))}))},dispose:function(){this.cancel(),this.selectListView.destroy()},cancel:function(){null!=this.panel&&this.panel.destroy(),this.panel=null,this.previouslyFocusedElement&&(this.previouslyFocusedElement.focus(),this.previouslyFocusedElement=null)},attach:function(){this.previouslyFocusedElement=document.activeElement,null==this.panel&&(this.panel=atom.workspace.addModalPanel({item:this.selectListView})),this.selectListView.focus(),this.selectListView.reset()},toggle:function(){return d(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return null==this.panel?[3,1]:(this.cancel(),[3,3]);case 1:return[4,Re(this.selectListView)];case 2:e.sent(),this.attach(),e.label=3;case 3:return[2]}}))}))}},Ke={config:$e.schema,subscriptions:new o.CompositeDisposable,activate:function(){return d(this,void 0,void 0,(function(){var e,n=this;return f(this,(function(t){switch(t.label){case 0:return Ne.log("Activating package"),[4,Promise.resolve().then((function(){return Le}))];case 1:return[4,(0,t.sent().initDotEnv)()];case 2:return t.sent(),this.subscriptions.add(atom.commands.add("atom-workspace",{"NSIS:command-reference":function(){return d(n,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,Ye.init()];case 1:return e.sent(),Ye.toggle(),[2]}}))}))}})),this.subscriptions.add(atom.commands.add("atom-workspace",{"NSIS:compile":function(){return d(n,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,qe(!1)];case 1:return[2,e.sent()]}}))}))}})),this.subscriptions.add(atom.commands.add("atom-workspace",{"NSIS:compile-strict":function(){return d(n,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,qe(!0)];case 1:return[2,e.sent()]}}))}))}})),this.subscriptions.add(atom.commands.add("atom-workspace",{"NSIS:create-.atom–build-file":function(){return d(n,void 0,void 0,(function(){var e;return f(this,(function(n){switch(n.label){case 0:return[4,Promise.resolve().then((function(){return Le}))];case 1:return(e=n.sent().isLoadedAndActive)("buildium")||e("build")?[4,Promise.resolve().then((function(){return require("./build-4c47d022.js")}))]:[3,4];case 2:return[4,(0,n.sent().createBuildFile)()];case 3:return n.sent(),[3,6];case 4:return[4,Promise.resolve().then((function(){return Le}))];case 5:(0,n.sent().missingPackageWarning)("buildium"),n.label=6;case 6:return[2]}}))}))}})),this.subscriptions.add(atom.commands.add("atom-workspace",{"NSIS:convert-language-file":function(){return d(n,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,Be()];case 1:return[2,e.sent()]}}))}))}})),this.subscriptions.add(atom.commands.add("atom-workspace",{"NSIS:show-compiler-flags":function(){return d(n,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,He()];case 1:return[2,e.sent()]}}))}))}})),this.subscriptions.add(atom.commands.add("atom-workspace",{"NSIS:show-version":function(){return d(n,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,Ve()];case 1:return[2,e.sent()]}}))}))}})),this.subscriptions.add(atom.commands.add("atom-workspace",{"NSIS:open-package-settings":function(){return d(n,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,atom.workspace.open("atom://config/packages/language-nsis",{pending:!0,searchAllPanes:!0})];case 1:return e.sent(),[2]}}))}))}})),this.subscriptions.add(atom.commands.add("atom-workspace",{"NSIS:satisfy-dependencies":function(){return d(n,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve().then((function(){return Le}))];case 1:return[4,(0,e.sent().manageDependencies)()];case 2:return e.sent(),[2]}}))}))}})),this.subscriptions.add(atom.commands.add("atom-workspace",{"NSIS:set-default-runner":function(){return d(n,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve().then((function(){return Le}))];case 1:return(0,e.sent().isLoadedAndActive)("atom-runner")?[4,Promise.resolve().then((function(){return require("./runner-30924c86.js")}))]:[3,4];case 2:return[4,(0,e.sent().setRunner)()];case 3:return e.sent(),[3,6];case 4:return[4,Promise.resolve().then((function(){return Le}))];case 5:(0,e.sent().missingPackageWarning)("runner"),e.label=6;case 6:return[2]}}))}))}})),this.subscriptions.add(atom.commands.add("atom-workspace",{"NSIS:unset-default-runner":function(){return d(n,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve().then((function(){return Le}))];case 1:return(0,e.sent().isLoadedAndActive)("atom-runner")?[4,Promise.resolve().then((function(){return require("./runner-30924c86.js")}))]:[3,4];case 2:return[4,(0,e.sent().unsetRunner)()];case 3:return e.sent(),[3,6];case 4:return[4,Promise.resolve().then((function(){return Le}))];case 5:(0,e.sent().missingPackageWarning)("runner"),e.label=6;case 6:return[2]}}))}))}})),$e.get("manageDependencies")?[4,Promise.resolve().then((function(){return Le}))]:[3,5];case 3:return[4,(0,t.sent().manageDependencies)()];case 4:t.sent(),t.label=5;case 5:return[4,Promise.resolve().then((function(){return Le}))];case 6:return(e=t.sent().migrateConfig)("allowHeaderCompilation","processHeaders"),e("compilerArguments","compilerOptions.customArguments"),e("compilerVerbosity","compilerOptions.verbosity"),e("pathToMakensis","compilerOptions.pathToMakensis"),[2]}}))}))},deactivate:function(){var e;Ne.log("Deactivating package"),null===(e=this.subscriptions)||void 0===e||e.dispose()},consumeConsolePanel:function(e){Ne.log("Consuming Console Panel service"),Ce.consumer(e)},consumeBrowse:function(e){Ne.log("Consuming Browse service"),Ae.consumer(e)},consumeSignal:function(e){Ne.log("Consuming Busy Signal service"),We.consumer(e)}};exports.Config=$e,exports.ConsolePanel=Ce,exports.__awaiter=d,exports.__generator=f,exports.__spreadArray=function(e,n,t){if(t||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||n)},exports.commonjsGlobal=p,exports.getAugmentedNamespace=function(e){if(e.__esModule)return e;var n=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n},exports.getDefaultExportFromCjs=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e},exports.main=Ke,exports.util=Le;
//# sourceMappingURL=main-0761cd91.js.map
