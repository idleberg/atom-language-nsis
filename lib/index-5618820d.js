"use strict";var e=require("path"),r=require("child_process"),t=require("fs"),o=require("os");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=n(e),s=n(r),a=n(t),c=n(o),u={exports:{}};const l=a.default;let p;var f=()=>(void 0===p&&(p=function(){try{return l.statSync("/.dockerenv"),!0}catch(e){return!1}}()||function(){try{return l.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(e){return!1}}()),p);const d=c.default,m=a.default,w=f,h=()=>{if("linux"!==process.platform)return!1;if(d.release().toLowerCase().includes("microsoft"))return!w();try{return!!m.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!w()}catch(e){return!1}};process.env.__IS_WSL_TEST__?u.exports=h:u.exports=h();const g=i.default,x=s.default,{promises:y,constants:b}=a.default,P=u.exports,_=f,v=(e,r,t)=>{const o=t=>Object.defineProperty(e,r,{value:t,enumerable:!0,writable:!0});return Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get(){const e=t();return o(e),e},set(e){o(e)}}),e},S=g.join(__dirname,"xdg-open"),{platform:E,arch:A}=process,F=(()=>{const e="/mnt/";let r;return async function(){if(r)return r;const t="/etc/wsl.conf";let o=!1;try{await y.access(t,b.F_OK),o=!0}catch{}if(!o)return e;const n=await y.readFile(t,{encoding:"utf8"}),i=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(n);return i?(r=i.groups.mountPoint.trim(),r=r.endsWith("/")?r:`${r}/`,r):e}})(),j=async(e,r)=>{let t;for(const o of e)try{return await r(o)}catch(e){t=e}throw t},C=async(e,r)=>{if("string"!=typeof e)throw new TypeError("Expected a `target`");if(r={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...r},Array.isArray(r.app))return j(r.app,(t=>C(e,{...r,app:t})));let t,{name:o,arguments:n=[]}=r.app||{};if(n=[...n],Array.isArray(o))return j(o,(t=>C(e,{...r,app:{name:t,arguments:n}})));const i=[],s={};if("darwin"===E)t="open",r.wait&&i.push("--wait-apps"),r.background&&i.push("--background"),r.newInstance&&i.push("--new"),o&&i.push("-a",o);else if("win32"===E||P&&!_()){const a=await F();t=P?`${a}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","â€“ExecutionPolicy","Bypass","-EncodedCommand"),P||(s.windowsVerbatimArguments=!0);const c=["Start"];r.wait&&c.push("-Wait"),o?(c.push(`"\`"${o}\`""`,"-ArgumentList"),n.unshift(e)):c.push(`"${e}"`),n.length>0&&(n=n.map((e=>`"\`"${e}\`""`)),c.push(n.join(","))),e=Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(o)t=o;else{const e=!__dirname||"/"===__dirname;let r=!1;try{await y.access(S,b.X_OK),r=!0}catch{}t=process.versions.electron||"android"===E||e||!r?"xdg-open":S}n.length>0&&i.push(...n),r.wait||(s.stdio="ignore",s.detached=!0)}i.push(e),"darwin"===E&&n.length>0&&i.push("--args",...n);const a=x.spawn(t,i,s);return r.wait?new Promise(((e,t)=>{a.once("error",t),a.once("close",(o=>{r.allowNonzeroExitCode&&o>0?t(new Error(`Exited with code ${o}`)):e(a)}))})):(a.unref(),a)};function O(e){if("string"==typeof e||Array.isArray(e))return e;const{[A]:r}=e;if(!r)throw new Error(`${A} is not supported`);return r}function $({[E]:e},{wsl:r}){if(r&&P)return O(r);if(!e)throw new Error(`${E} is not supported`);return O(e)}const W={};v(W,"chrome",(()=>$({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}))),v(W,"firefox",(()=>$({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}))),v(W,"edge",(()=>$({darwin:"microsoft edge",win32:"msedge",linux:"microsoft-edge"},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}))),C.apps=W;var k=C,z=Object.freeze(Object.assign(Object.create(null),k,{default:k}));exports.index=z;
