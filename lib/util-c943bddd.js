"use strict";var e=require("./main-3670284d.js"),n=require("fs"),t=require("path"),r=require("os"),o=require("child_process"),a=require("./_commonjsHelpers-77e585f7.js");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("atom");var s=i(n),c=i(t),l=i(r),u=i(o);const d=s.default,f=c.default,p=l.default;function m(e){console.log(`[dotenv][DEBUG] ${e}`)}const g=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,h=/\\n/g,v=/\r\n|\n|\r/;var y=function(e){let n=f.resolve(process.cwd(),".env"),t="utf8",r=!1;var o;e&&(null!=e.path&&(n="~"===(o=e.path)[0]?f.join(p.homedir(),o.slice(1)):o),null!=e.encoding&&(t=e.encoding),null!=e.debug&&(r=!0));try{const e=function(e,n){const t=Boolean(n&&n.debug),r={};return e.toString().split(v).forEach((function(e,n){const o=e.match(g);if(null!=o){const e=o[1];let n=o[2]||"";const t=n.length-1,a='"'===n[0]&&'"'===n[t];"'"===n[0]&&"'"===n[t]||a?(n=n.substring(1,t),a&&(n=n.replace(h,"\n"))):n=n.trim(),r[e]=n}else t&&m(`did not match key and value when parsing line ${n+1}: ${e}`)})),r}(d.readFileSync(n,{encoding:t}),{debug:r});return Object.keys(e).forEach((function(n){Object.prototype.hasOwnProperty.call(process.env,n)?r&&m(`"${n}" is already defined in \`process.env\` and will not be overwritten`):process.env[n]=e[n]})),{parsed:e}}catch(e){return{error:e}}},w={},b={};Object.defineProperty(b,"__esModule",{value:!0});var k=l.default,_=u.default,E=s.default,P=c.default;function x(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var j=x(k),S=x(E),C=x(P);const D=/\s+at.*(?:\(|\s)(.*)\)?/,N=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,$=void 0===j.default.homedir?"":j.default.homedir();class A extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let n=(e=[...e].map((e=>e instanceof Error?e:null!==e&&"object"==typeof e?Object.assign(new Error(e.message),e):new Error(e)))).map((e=>{return"string"==typeof e.stack?(e=>e.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""))((n=e.stack,t=Object.assign({pretty:!1},t),n.replace(/\\/g,"/").split("\n").filter((e=>{const n=e.match(D);if(null===n||!n[1])return!0;const t=n[1];return!t.includes(".app/Contents/Resources/electron.asar")&&!t.includes(".app/Contents/Resources/default_app.asar")&&!N.test(t)})).filter((e=>""!==e.trim())).map((e=>t.pretty?e.replace(D,((e,n)=>e.replace(n,n.replace($,"~")))):e)).join("\n"))):String(e);var n,t})).join("\n");n="\n"+((e,n=1,t)=>{if(t={indent:" ",includeEmptyLines:!1,...t},"string"!=typeof e)throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof e}\``);if("number"!=typeof n)throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof n}\``);if("string"!=typeof t.indent)throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof t.indent}\``);if(0===n)return e;const r=t.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return e.replace(r,t.indent.repeat(n))})(n,4),super(n),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:e})}*[Symbol.iterator](){for(const e of this._errors)yield e}}var O=A;const T=(e,n,t)=>new Promise(((r,o)=>{if(t=Object.assign({concurrency:1/0},t),"function"!=typeof n)throw new TypeError("Mapper function is required");const{concurrency:a}=t;if(!("number"==typeof a&&a>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${a}\` (${typeof a})`);const i=[],s=e[Symbol.iterator]();let c=!1,l=!1,u=0,d=0;const f=()=>{if(c)return;const e=s.next(),t=d;if(d++,e.done)return l=!0,void(0===u&&r(i));u++,Promise.resolve(e.value).then((e=>n(e,t))).then((e=>{i[t]=e,u--,f()}),(e=>{c=!0,o(e)}))};for(let e=0;e<a&&(f(),!l);e++);}));var I=T,M=T;I.default=M;const F=async(e,n,t)=>(await I(e,((e,t)=>Promise.all([n(e,t),e])),t)).filter((e=>Boolean(e[0]))).map((e=>e[1]));var q=F,R=F;q.default=R;const G="undefined"!=typeof atom,L="undefined"!=typeof atom&&(atom.inDevMode()||atom.inSpecMode());
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */
var V=/["'&<>]/,W=function(e){var n,t=""+e,r=V.exec(t);if(!r)return t;var o="",a=0,i=0;for(a=r.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}i!==a&&(o+=t.substring(i,a)),i=a+1,o+=n}return i!==a?o+t.substring(i,a):o};function B(e,n,t){let r;const o=async function(e,n,t){const r=_.spawn(e,n,t),o=new Promise(((e,n)=>{const o={stdout:r.stdout?[]:null,stderr:r.stderr?[]:null};r.on("error",n),r.stdout&&r.stdout.on("data",(function(e){o.stdout.push(e),t.handleStdout&&t.handleStdout(e)})),r.stderr&&r.stderr.on("data",(function(e){o.stderr.push(e),t.handleStderr&&t.handleStderr(e)})),r.on("close",(n=>{let r=null;null!=o.stdout&&(r=null===t.encoding||"buffer"===t.encoding?Buffer.concat(o.stdout):o.stdout.join(""));let a=null;null!=o.stderr&&(a=null===t.encoding||"buffer"===t.encoding?Buffer.concat(o.stderr):o.stderr.join("")),e({exitCode:n,stdout:r,stderr:a})}))}));return t.handleChildProcess(r),o}(e,n,{...t,handleChildProcess(e){r=e}});return o.kill=function(e){return r.kill(e)},o}async function H(e){if(G){const n=await async function(e){var n;const t=atom.packages.getLoadedPackage(e.name);return null==t?null:null!==(n=t.metadata.version)&&void 0!==n?n:null}(e);if(n)return n}return async function(e){var n,t;const{directory:r}=e;if(null==r)return null;let o=null;try{o=JSON.parse(await S.default.promises.readFile(C.default.join(r,"package.json"),"utf8"))}catch(e){return null}return null!==(n=null===(t=o)||void 0===t?void 0:t.version)&&void 0!==n?n:null}(e)}const U=G?async function(e){return atom.packages.resolvePackagePath(e)}:async function(e){var n;const t=C.default.join(null!==(n=process.env.ATOM_HOME)&&void 0!==n?n:C.default.join(j.default.homedir(),".atom"),"packages",e);try{return await S.default.promises.access(t,S.default.constants.R_OK),t}catch(e){return null}};function J(e,n){if(!e)throw new Error(null!=n?n:"Invariant violation")}async function K(e){const n=await(G?async function(e){const n=atom.packages.getLoadedPackage(e),t=n&&n.metadata["package-deps"];return Array.isArray(t)?t:[]}(e):async function(e){let n=null;try{n=await S.default.promises.stat(e)}catch(e){}if(null==n||!n.isDirectory())throw new Error("[Package-Deps] Expected packageName to be a readable directory in Node.js invocation");let t=null;try{const n=await S.default.promises.readFile(C.default.join(e,"package.json"),"utf8");t=JSON.parse(n)}catch(e){}const r=null==t||"object"!=typeof t?[]:t["package-deps"];return Array.isArray(r)?r:[]}(e));return L&&(J(Array.isArray(n),`Dependencies for ${e} are not a valid array`),n.forEach(((n,t)=>{if(Array.isArray(n))n.forEach(((n,r)=>{const o=`Dependency#${t}#${r} for ${e} is invalid`;J("string"==typeof n.name&&n.name.length>0,o),J(null==n.minimumVersion||"string"==typeof n.minimumVersion&&n.minimumVersion.length>0,o)})),J(n.length>0,`Dependency#${t} for ${e} has no group items`);else{const r=`Dependency#${t} for ${e} is invalid`;J("string"==typeof n.name&&n.name.length>0,r),J(null==n.minimumVersion||"string"==typeof n.minimumVersion&&n.minimumVersion.length>0,r)}}))),n}async function Y(e){if(null==e.directory)return!0;if(null==e.minimumVersion)return!1;const n=await H(e);return null==n||1===function(e,n){for(var t=e.split("."),r=n.split("."),o=0;o<3;o++){var a=Number(t[o]),i=Number(r[o]);if(a>i)return 1;if(i>a)return-1;if(!isNaN(a)&&isNaN(i))return 1;if(isNaN(a)&&!isNaN(i))return-1}return 0}(e.minimumVersion,n)}const z=new Set(["âœ“","done"]),Q=/(?:Installing|Moving) (.*?) to .* (.*)/;async function X(e){if("string"==typeof e)return{name:e,directory:await U(e)};if("name"in e)return{...e,directory:await U(e.name)};throw console.error("This package-deps entry is not valid. Please see https://github.com/steelbrain/package-deps#how-it-works",{entry:e}),Error("The package-deps entry is not valid. Please see https://github.com/steelbrain/package-deps#how-it-works")}let Z=!0;const ee=G?function({packageName:e,dependencies:n}){const t=[],r=atom.notifications.addInfo(`Installing ${e} dependencies`,{detail:`Installing ${n.map((e=>e.name)).join(", ")}`,dismissable:!0}),o=document.createElement("progress");o.max=n.length,o.style.width="100%";try{var a;const e=atom.views.getView(r),n=null!==(a=null==e?void 0:e.element)&&void 0!==a?a:null;if(null==n)throw new Error("Unable to get notification element from view");const t=n.querySelector(".detail-content");if(null==t)throw new Error("Content detail container not found inside the notification");t.appendChild(o)}catch(e){console.error("[Package-Deps] Error during showing installation progress to user",e)}return{handleFailure({dependency:e,error:n}){var r;t.push(e.name),o.value+=1,console.error(`[Package-Deps] Unable to install ${e.name}, Error:`,null!==(r=null==n?void 0:n.stack)&&void 0!==r?r:n)},handleDependencyInstalled(e){o.value+=1},handleComplete(){r.dismiss(),t.length>0?atom.notifications.addWarning(`Failed to install ${e} dependencies`,{detail:`These packages were not installed, check your console\nfor more info.\n${t.join("\n")}`,dismissable:!0}):atom.notifications.addSuccess(`Installed ${e} dependencies`,{detail:`Installed ${n.map((e=>e.name)).join(", ")}`}),Promise.all(n.map((e=>t.includes(e.name)?null:atom.packages.activatePackage(e.name)))).catch((n=>{console.error(`[Package-Deps] Error activating installed packages for ${e}`,n)}))}}}:function({dependencies:e}){let n=!1;return console.log(`Installing dependencies:\n${e.map((e=>`  - ${e.name}`)).join("\n")}`),{handleFailure({dependency:e,error:t}){var r;n=!0,console.error(`Unable to install ${e.name}, Error:`,null!==(r=null==t?void 0:t.stack)&&void 0!==r?r:t)},handleDependencyInstalled(e){console.log("Successfully installed",e.name)},handleComplete(){console.log("Installation complete"),n&&(process.exitCode=1)}}},ne=G?function({packageName:e,dependencies:n}){return new Promise((t=>{const r=n.filter((e=>!Array.isArray(e))),o=n.filter((e=>Array.isArray(e))),a=0===o.length,i=a?r.map((e=>e.name)).join(", "):"Something went wrong. Check your developer console",s=o.map((e=>e[0]));atom.packages.isPackageDisabled("notifications")&&console.warn(`Enable notifications to install dependencies for ${e}`);const c=atom.notifications.addInfo(`${e} needs to install dependencies`,{dismissable:!0,icon:"cloud-download",detail:i,description:`Install dependenc${1===n.length?"y":"ies"}?`,buttons:[{text:"Yes",onDidClick:()=>{t(a?r:r.concat(s)),c.dismiss()}},{text:"No Thanks",onDidClick:()=>{c.dismiss()}},{text:"Never",onDidClick:()=>{!function(e){var n;if(!G)return;const t=new Set(null!==(n=atom.config.get("atom-package-deps.ignored"))&&void 0!==n?n:[]);t.add(e),atom.config.set("atom-package-deps.ignored",Array.from(t))}(e),Z&&(Z=!1,atom.notifications.addInfo("How to reset package-deps memory",{dismissable:!0,description:"To modify the list of ignored files invoke 'Application: Open Your Config' and change the 'atom-package-deps' section"})),c.dismiss()}}]});if(c.onDidDismiss((()=>t([]))),!a)try{var l;const e=atom.views.getView(c),n=null!==(l=null==e?void 0:e.element)&&void 0!==l?l:null;if(null==n)throw new Error("Unable to get notification element from view");const t=n.querySelector(".detail-content");if(null==t)throw new Error("Content detail container not found inside the notification");if(t.innerHTML="",r.length>0){const e=document.createElement("div");e.innerHTML=`Packages without choices: <br /><ul><li>${r.map((e=>W(e.name))).join("</li><li>")}</li></ul>`,t.appendChild(e)}const a=document.createElement("div");a.innerHTML="Packages with choices:",t.appendChild(a);const i=document.createElement("ul");o.forEach(((e,n)=>{const t=document.createElement("li"),r=document.createElement("select");r.innerHTML=e.map((e=>`<option>${W(e.name)}</option>`)).join("\n"),r.addEventListener("change",(()=>{const t=e.find((e=>e.name===r.value));null!=t&&(s[n]=t)})),t.style.marginTop="5px",t.appendChild(r),i.appendChild(t)})),t.appendChild(i)}catch(e){console.error("[Package-Deps] Error during showing package choices to user",e)}}))}:async function({dependencies:e}){return e.map((e=>Array.isArray(e)?e[0]:e))};b.install=async function(e,n=!1){if(J("string"==typeof e&&e.length>0,"[Package-Deps] Package name is required"),t=e,G&&(null!==(r=atom.config.get("atom-package-deps.ignored"))&&void 0!==r?r:[]).includes(t))return;var t,r;const o=await K(e);if(0===o.length)return;const a=await Promise.all(o.map((async e=>Array.isArray(e)?Promise.all(e.map(X)):X(e)))),i=await q(a,(async function(e){return Array.isArray(e)?(await Promise.all(e.map((e=>Y(e))))).every(Boolean):Y(e)}));if(0===i.length)return;let s;if(s=n?i.map((e=>Array.isArray(e)?e[0]:e)):await ne({packageName:e,dependencies:i}),0===s.length)return;const c=ee({packageName:e,dependencies:s});await(async(e,n,{concurrency:t=1/0,stopOnError:r=!0}={})=>new Promise(((o,a)=>{if("function"!=typeof n)throw new TypeError("Mapper function is required");if(!Number.isSafeInteger(t)&&t!==1/0||!(t>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${t}\` (${typeof t})`);const i=[],s=[],c=e[Symbol.iterator]();let l=!1,u=!1,d=0,f=0;const p=()=>{if(l)return;const e=c.next(),t=f;if(f++,e.done)return u=!0,void(0===d&&(r||0===s.length?o(i):a(new O(s))));d++,(async()=>{try{const r=await e.value;i[t]=await n(r,t),d--,p()}catch(e){r?(l=!0,a(e)):(s.push(e),d--,p())}})()};for(let e=0;e<t&&(p(),!u);e++);})))(s,(async function(e){try{await async function(e){const n=G?`"${atom.packages.getApmPath()}"`:"apm",{stdout:t,stderr:r}=await B(n,["install",e.name,"--production","--color","false"],{shell:!0}),o=Q.exec(t.trim());if(null!=o&&z.has(o[2]))return;const a=new Error(`Error installing dependency: ${e.name}`);throw a.stack=r.trim(),a}(e),c.handleDependencyInstalled(e)}catch(n){c.handleFailure({dependency:e,error:n})}}),{concurrency:2}),c.handleComplete()};var te={},re={exports:{}};const oe=()=>{const e=Error.prepareStackTrace;Error.prepareStackTrace=(e,n)=>n;const n=(new Error).stack.slice(1);return Error.prepareStackTrace=e,n};re.exports=oe,re.exports.default=oe;const ae=re.exports;var ie=a.commonjsGlobal&&a.commonjsGlobal.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}c((r=r.apply(e,n||[])).next())}))},se=a.commonjsGlobal&&a.commonjsGlobal.__generator||function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(te,"__esModule",{value:!0}),te.readManifestSync=te.readManifest=void 0;var ce=c.default,le=ce.resolve,ue=ce.sep,de=s.default,fe=de.promises,pe=de.readFileSync,me=({depth:e=0}={})=>{const n=[],t=new Set;for(const r of ae()){const o=r.getFileName(),a=null!==r.getTypeName()&&null!==o;if(t.has(o)||(t.add(o),n.unshift(r)),a)return n[e]}};function ge(e){e=(null==e?void 0:e.length)?e:function(){var e=me().getFileName(),n=atom.packages.getPackageDirPaths().filter((function(n){return e.startsWith(n)}));if(null==n?void 0:n.length)return e.replace(n[0],"").split(ue).filter((function(e){return e}))[0]||"";return""}();var n=atom.packages.resolvePackagePath(e);return le(n,"package.json")}te.readManifest=function(e){return void 0===e&&(e=""),ie(this,void 0,void 0,(function(){var n,t;return se(this,(function(r){switch(r.label){case 0:n=ge(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,fe.readFile(n,"utf8")];case 2:return t=r.sent(),[2,JSON.parse(t)];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},te.readManifestSync=function(e){void 0===e&&(e="");var n=ge(e);try{var t=pe(n,"utf8");return JSON.parse(t)}catch(e){return null}};var he=a.commonjsGlobal&&a.commonjsGlobal.__assign||function(){return(he=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},ve=a.commonjsGlobal&&a.commonjsGlobal.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}c((r=r.apply(e,n||[])).next())}))},ye=a.commonjsGlobal&&a.commonjsGlobal.__generator||function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(w,"__esModule",{value:!0});var we=w.satisfyDependencies=void 0,be=b,ke=te,_e={logger:console.log};function Ee(t){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,n.promises.access(t,n.constants.F_OK)];case 1:return e.sent(),[3,3];case 2:return e.sent(),[2,!1];case 3:return[2,!0]}}))}))}function Pe(){return e.__awaiter(this,void 0,void 0,(function(){var n,r,o,a;return e.__generator(this,(function(i){switch(i.label){case 0:return n=void 0,(r=atom.project.getPaths()[0])?(o=!0,[4,Ee(t.resolve(r,".env.local"))]):[3,10];case 1:switch(o){case i.sent():return[3,5]}return(a=process.env.NODE_ENV)?[4,Ee(t.resolve(r,".env.["+process.env.NODE_ENV+"]"))]:[3,3];case 2:a=i.sent(),i.label=3;case 3:switch(o){case a:return[3,6]}return[4,Ee(t.resolve(r,".env"))];case 4:switch(o){case i.sent():return[3,7]}return[3,8];case 5:return n=t.resolve(r,".env.local"),[3,9];case 6:return n=t.resolve(r,".env.["+process.env.NODE_ENV+"]"),[3,9];case 7:return n=t.resolve(r,".env"),[3,9];case 8:return[3,9];case 9:n&&e.devConsole.log("Found DotEnv file "+n),i.label=10;case 10:return[2,n]}}))}))}function xe(e){return atom.packages.isPackageLoaded(e)&&atom.packages.isPackageActive(e)}function je(){return!("win32"!==r.platform()&&!e.Config.get("useWineToRun"))}function Se(n){return e.__awaiter(this,void 0,void 0,(function(){var t,a;return e.__generator(this,(function(i){switch(i.label){case 0:if("win32"!==r.platform())return[3,1];try{o.exec('cmd /c "'+n+'"')}catch(e){console.error(e),atom.notifications.addWarning("Failed to run installer, see console for details",{dismissable:!0})}return[2];case 1:return e.Config.get("useWineToRun")?[4,Promise.resolve().then((function(){return require("./index-fd14704c.js")})).then((function(e){return e.index}))]:[3,6];case 2:t=i.sent().default,i.label=3;case 3:return i.trys.push([3,5,,6]),[4,t("wine",[n])];case 4:return i.sent(),[3,6];case 5:return a=i.sent(),atom.notifications.addWarning("Failed to run installer, see console for details",{dismissable:!0}),console.error(a),[3,6];case 6:return[2]}}))}))}we=w.satisfyDependencies=function(e,n){return void 0===n&&(n={}),ve(this,void 0,void 0,(function(){var t,r;return ye(this,(function(o){switch(o.label){case 0:return t=he(he({},_e),n),[4,ke.readManifest(e)];case 1:return r=o.sent(),[4,be.install(r.name)];case 2:return o.sent(),function(e,n){n.enableDependencies&&e["package-deps"].map((function(t){atom.packages.isPackageDisabled(t)&&(atom.inDevMode()&&n.logger("["+e.name+"] Enabling package dependency '"+t+"'"),atom.packages.enablePackage(t))}))}(r["package-deps"],t),[2]}}))}))},exports.clearConsole=function(){try{e.ConsolePanel.clear()}catch(n){e.Config.get("clearConsole")&&console.clear()}},exports.fileExists=Ee,exports.findPackagePath=function(n){return e.__awaiter(this,void 0,void 0,(function(){var r,o=this;return e.__generator(this,(function(a){switch(a.label){case 0:return r=atom.packages.getPackageDirPaths(),[4,Promise.all(r.map((function(r){return e.__awaiter(o,void 0,void 0,(function(){var o;return e.__generator(this,(function(e){switch(e.label){case 0:return o=t.resolve(r,n),[4,Ee(t.resolve(o,"package.json"))];case 1:return e.sent()?[2,o]:[2,void 0]}}))}))})))];case 1:return[2,a.sent().filter((function(e){return e}))]}}))}))},exports.getMakensisPath=function(){return e.__awaiter(this,void 0,void 0,(function(){var n,t,r;return e.__generator(this,(function(o){switch(o.label){case 0:return(null==(n=String(e.Config.get("compilerOptions.pathToMakensis")))?void 0:n.length)&&"makensis"!==n?[2,n]:[4,Promise.resolve().then((function(){return require("./which-67c9997d.js")})).then((function(e){return e.which}))];case 1:return t=o.sent().default,r=String,[4,t("makensis")];case 2:return[2,r.apply(void 0,[o.sent()])||"makensis"]}}))}))},exports.getSpawnEnv=function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){return[2,{env:{NSISDIR:process.env.NSISDIR||void 0,NSISCONFDIR:process.env.NSISCONFDIR||void 0}}]}))}))},exports.initDotEnv=function(){return e.__awaiter(this,void 0,void 0,(function(){var n,t;return e.__generator(this,(function(r){switch(r.label){case 0:return[4,Promise.resolve().then((function(){return require("./main-297ff40a.js")})).then((function(e){return e.main}))];case 1:return n=r.sent().default,[4,Pe()];case 2:return t=r.sent(),n(y({path:t})),t&&e.devConsole.log("Loading environment variables",Object.entries(process.env).filter((function(e){return e[0].startsWith("NSIS_APP_")}))),[2]}}))}))},exports.isHeaderFile=function(e){return Boolean([".bnsh",".nsh"].filter((function(n){return null==e?void 0:e.endsWith(n)})).length)},exports.isLoadedAndActive=xe,exports.isWindowsCompatible=je,exports.manageDependencies=function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(n){switch(n.label){case 0:return[4,we(e.name)];case 1:return n.sent(),[2]}}))}))},exports.mapDefinitions=function(){var e={};return Object.keys(process.env).map((function(n){n.length&&new RegExp("NSIS_APP_[a-z0-9]+","gi").test(n)&&(e[n]=process.env[n])})),Object.keys(e).length?e:void 0},exports.migrateConfig=function(n,t){if(atom.config.get(e.name+"."+n)&&!atom.config.get(e.name+"."+t)){try{atom.config.set(e.name+"."+t,atom.config.get(e.name+"."+n))}catch(e){return console.log(e),void atom.notifications.addWarning("Failed to migrate configuration, see console for details")}e.devConsole.warn("The setting '"+n+"' was migrated successfully to '"+t+"'"),atom.config.unset(e.name+"."+n)}else e.devConsole.warn("The setting '"+t+"' already exists, skipping migration")},exports.missingPackageWarning=function(n){var t=atom.notifications.addWarning("This command requires the `"+n+"` package to be installed and enabled",{dismissable:!0,buttons:[{text:"Show Package",onDidClick:function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return t.dismiss(),[4,atom.workspace.open("atom://config/packages/"+n,{pending:!0,searchAllPanes:!0})];case 1:return e.sent(),[2]}}))}))}},{text:"Cancel",onDidClick:function(){t.dismiss()}}]})},exports.notifyOnCompletion=function(n,t,r){var o=atom.notifications[n](t,{dismissable:!0,buttons:r?[je()?{text:"Run",className:"icon icon-playback-play",onDidClick:function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return o.dismiss(),[4,Se(r)];case 1:return e.sent(),[2]}}))}))}}:void 0,xe("browse")?{text:"Reveal",className:"icon icon-location",onDidClick:function(){o.dismiss(),e.Browse.reveal(r)}}:void 0,{text:"Cancel",onDidClick:function(){o.dismiss()}}].filter((function(e){return e})):[]})},exports.openURL=function(n){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve().then((function(){return require("./index-5618820d.js")})).then((function(e){return e.index}))];case 1:return(0,e.sent().default)("https://idleberg.github.io/NSIS.docset/Contents/Resources/Documents/html/Reference/"+n+".html?utm_source=atom&utm_content=reference"),[2]}}))}))};
//# sourceMappingURL=util-c943bddd.js.map
