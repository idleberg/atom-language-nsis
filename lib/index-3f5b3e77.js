"use strict";var e=require("path"),r=require("child_process"),t=require("fs"),o=require("os");function n(e,r){return r.forEach((function(r){r&&"string"!=typeof r&&!Array.isArray(r)&&Object.keys(r).forEach((function(t){if("default"!==t&&!(t in e)){var o=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,o.get?o:{enumerable:!0,get:function(){return r[t]}})}}))})),Object.freeze(e)}var i={},s={get exports(){return i},set exports(e){i=e}};const a=t;let c;var u=()=>(void 0===c&&(c=function(){try{return a.statSync("/.dockerenv"),!0}catch(e){return!1}}()||function(){try{return a.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(e){return!1}}()),c);const p=o,l=t,f=u,g=()=>{if("linux"!==process.platform)return!1;if(p.release().toLowerCase().includes("microsoft"))return!f();try{return!!l.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!f()}catch(e){return!1}};process.env.__IS_WSL_TEST__?s.exports=g:s.exports=g();const m=e,d=r,{promises:w,constants:h}=t,y=i,x=u,A=(e,r,t)=>{const o=t=>Object.defineProperty(e,r,{value:t,enumerable:!0,writable:!0});return Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get(){const e=t();return o(e),e},set(e){o(e)}}),e},E=m.join(__dirname,"xdg-open"),{platform:_,arch:v}=process,b=()=>{try{return w.statSync("/run/.containerenv"),!0}catch{return!1}};let P;const S=(()=>{const e="/mnt/";let r;return async function(){if(r)return r;const t="/etc/wsl.conf";let o=!1;try{await w.access(t,h.F_OK),o=!0}catch{}if(!o)return e;const n=await w.readFile(t,{encoding:"utf8"}),i=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(n);return i?(r=i.groups.mountPoint.trim(),r=r.endsWith("/")?r:`${r}/`,r):e}})(),F=async(e,r)=>{let t;for(const o of e)try{return await r(o)}catch(e){t=e}throw t},O=async e=>{if(e={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...e},Array.isArray(e.app))return F(e.app,(r=>O({...e,app:r})));let r,{name:t,arguments:o=[]}=e.app||{};if(o=[...o],Array.isArray(t))return F(t,(r=>O({...e,app:{name:r,arguments:o}})));const n=[],i={};if("darwin"===_)r="open",e.wait&&n.push("--wait-apps"),e.background&&n.push("--background"),e.newInstance&&n.push("--new"),t&&n.push("-a",t);else if("win32"===_||y&&(void 0===P&&(P=b()||x()),!P)&&!t){const s=await S();r=y?`${s}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,n.push("-NoProfile","-NonInteractive","â€“ExecutionPolicy","Bypass","-EncodedCommand"),y||(i.windowsVerbatimArguments=!0);const a=["Start"];e.wait&&a.push("-Wait"),t?(a.push(`"\`"${t}\`""`,"-ArgumentList"),e.target&&o.unshift(e.target)):e.target&&a.push(`"${e.target}"`),o.length>0&&(o=o.map((e=>`"\`"${e}\`""`)),a.push(o.join(","))),e.target=Buffer.from(a.join(" "),"utf16le").toString("base64")}else{if(t)r=t;else{const e=!__dirname||"/"===__dirname;let t=!1;try{await w.access(E,h.X_OK),t=!0}catch{}r=process.versions.electron||"android"===_||e||!t?"xdg-open":E}o.length>0&&n.push(...o),e.wait||(i.stdio="ignore",i.detached=!0)}e.target&&n.push(e.target),"darwin"===_&&o.length>0&&n.push("--args",...o);const s=d.spawn(r,n,i);return e.wait?new Promise(((r,t)=>{s.once("error",t),s.once("close",(o=>{!e.allowNonzeroExitCode&&o>0?t(new Error(`Exited with code ${o}`)):r(s)}))})):(s.unref(),s)},j=(e,r)=>{if("string"!=typeof e)throw new TypeError("Expected a `target`");return O({...r,target:e})};function C(e){if("string"==typeof e||Array.isArray(e))return e;const{[v]:r}=e;if(!r)throw new Error(`${v} is not supported`);return r}function $({[_]:e},{wsl:r}){if(r&&y)return C(r);if(!e)throw new Error(`${_} is not supported`);return C(e)}const T={};A(T,"chrome",(()=>$({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}))),A(T,"firefox",(()=>$({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}))),A(T,"edge",(()=>$({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}))),j.apps=T,j.openApp=(e,r)=>{if("string"!=typeof e)throw new TypeError("Expected a `name`");const{arguments:t=[]}=r||{};if(null!=t&&!Array.isArray(t))throw new TypeError("Expected `appArguments` as Array type");return O({...r,app:{name:e,arguments:t}})};var k=n({__proto__:null,default:j},[j]);exports.index=k;
//# sourceMappingURL=index-3f5b3e77.js.map
